

<form [formGroup]="form" *ngIf="showForm()">
  <p-panel header="Distribucion" [style]="{border: 'none'}">
    <div class="ui-g ui-fluid">
      <div class="ui-sm-12 ui-md-4 ui-g-4 ui-lg-4">
        <div style="padding: 20px 0 0 10px">
          <p-radioButton name="distribucion"
                         label="Física"
                         value="física"
                         formControlName="distribucion"
                         (onClick)="dispatchSelectDistElectronica(false)">
          </p-radioButton>
        </div>
      </div>
      <div class="ui-sm-12 ui-md-4 ui-g-4 ui-lg-4">
        <div style="padding: 20px 0 0 10px">
          <p-radioButton name="distribucion"
                         label="Electrónica"
                         value="eléctronica"
                         formControlName="distribucion"  (onClick)="dispatchSelectDistElectronica(true)">
          </p-radioButton>
        </div>
      </div>
      <div class="ui-sm-12 ui-md-4 ui-g-4 ui-lg-4">
        <div style="padding: 20px 0 0 10px">
          <p-checkbox name="responderRemitente"
                      label="Responder a remitente"
                      formControlName="responderRemitente"
                      id="responderRemitente"
                      binary="true"
                      [hidden]="!hasNumberRadicado"
                      [dynamicDisable]="issetListDestinatarioBacken"
                      (onChange) = "onChangeResponderRemitente($event)"
                      checked = "responderRemitente">
          </p-checkbox>
        </div>
      </div>
    </div>
  </p-panel>
</form>

<!--------------------------------------------- TABLAS  ------------------------->

<div class="ui-fluid" style="margin-top: 60px">
  <p-dataTable [value]="listaDestinatariosExternos" selectionMode="single"
               [paginator]="true" [rows]="10" [responsive]="true"
               emptyMessage="No se encontraron resultados"
  >
    <p-header>

      <div class="ui-helper-clearfix">
                <span class="ui-panel-title"
                      style="font-size:16px;display:inline-block;margin-top:8px"> Datos de destinatarios externos </span>

              <span style="float: right">
                    <button pButton type="button" label="Agregar" style="width: auto; margin-left: 12px"
                            (click)="showAddDestinatarioExternoPopup()"></button>
              </span>
      </div>

    </p-header>



    <p-column header="Tipo Destinatario">
      <ng-template let-destinatario="rowData" let-i="rowIndex" pTemplate="item">
        <div class="ui-g-12" *ngIf="destinatario.tipoDestinatario.nombre">
                  <span class="table-text-custom">
                      {{ destinatario.tipoDestinatario.nombre }}
                    </span>
        </div>
      </ng-template>
    </p-column>


    <p-column header="Tipo Persona">
      <ng-template let-destinatario="rowData" let-i="rowIndex" pTemplate="item">
        <div class="ui-g-12" *ngIf="destinatario.tipoPersona.nombre">
                  <span class="table-text-custom">
                      {{ destinatario.tipoPersona.nombre }}
                    </span>
        </div>
      </ng-template>
    </p-column>




    <p-column header="Nombre">
      <ng-template let-destinatario="rowData" let-i="rowIndex" pTemplate="item">
        <div class="ui-g-12" *ngIf="destinatario.nombre">
                  <span class="table-text-custom">
                      {{ destinatario.nombre }}
                    </span>

        </div>
      </ng-template>
    </p-column>

    <p-column header="Tipo de Documento">
      <ng-template let-destinatario="rowData" let-i="rowIndex" pTemplate="item">
          <div class="ui-g-12" *ngIf="destinatario.tipoDocumento">
            <span class="table-text-custom">
                {{ destinatario.tipoDocumento.nombre }}
            </span>
          </div>
      </ng-template>
    </p-column>


    <p-column header="Acciones" [style]="{'width':'100px','text-align':'center'}" *ngIf="editable === true">
      <ng-template let-destinatario="rowData" let-i="rowIndex" pTemplate="item">

        <button type="button" icon="ui-icon-mode-edit" pButton (click)="editDestinatario(i,'EXT')"
                class="amber-btn ui-button ui-button-icon"></button>

        <button type="button" icon="ui-icon-close" pButton (click)="deleteDestinatario(i,'EXT')"
                class="ui-button ui-button-icon ui-button-danger"></button>

      </ng-template>
    </p-column>
  </p-dataTable>
</div>


<div class="ui-fluid" style="margin-top: 60px">


  <p-dataTable [value]="listaDestinatariosInternos" selectionMode="single"
               [paginator]="true" [rows]="10" [responsive]="true"
               emptyMessage="No se encontraron resultados">
    <p-header>

      <div class="ui-helper-clearfix">
                <span class="ui-panel-title"
                      style="font-size:16px;display:inline-block;margin-top:8px"> Datos de destinatarios internos </span>

              <span style="float: right">
                    <button pButton type="button" label="Agregar" style="width: auto; margin-left: 12px"
                            (click)="showAddDestinatarioInternoPopup()"></button>
                </span>
      </div>

    </p-header>

    <p-column header="Tipo Destinatario">
      <ng-template let-destinatario="rowData" let-i="rowIndex" pTemplate="item">
        <div class="ui-g-12" *ngIf="destinatario.tipoDestinatario.nombre">
                  <span class="table-text-custom">
                      {{ destinatario.tipoDestinatario.nombre }}
                    </span>
        </div>
      </ng-template>
    </p-column>

    <p-column header="Sede">
      <ng-template let-destinatario="rowData" let-i="rowIndex" pTemplate="item">
        <div class="ui-g-12" *ngIf="destinatario.sede">
            <span class="table-text-custom">
                {{ destinatario.sede.nombre }}
            </span>
        </div>
      </ng-template>
    </p-column>

    <p-column header="Dependencia">
      <ng-template let-destinatario="rowData" let-i="rowIndex" pTemplate="item">
        <div class="ui-g-12" *ngIf="destinatario.dependencia">
            <span class="table-text-custom">
                {{ destinatario.dependencia.nombre }}
            </span>
        </div>
      </ng-template>
    </p-column>


    <p-column header="Acciones" [style]="{'width':'100px','text-align':'center'}" *ngIf="editable === true">
      <ng-template let-destinatario="rowData" let-i="rowIndex" pTemplate="item">

        <button type="button" icon="ui-icon-mode-edit" pButton (click)="editDestinatario(i,'INT')"
                class="amber-btn ui-button ui-button-icon"></button>

        <button type="button" icon="ui-icon-close" pButton (click)="deleteDestinatario(i,'INT')"
                class="ui-button ui-button-icon ui-button-danger"></button>

      </ng-template>
    </p-column>
  </p-dataTable>
</div>

<!--------------------------------------------- POPUP  ------------------------->

<p-dialog [visible]="destinatarioExternoDialogVisible" [modal]="true" modal="modal" [responsive]="true" positionTop="20"
          (onHide)="hideAddDestinatarioExternoPopup()" [width]="800" [style]="{'overflow': 'scroll','max-height': '100%'}">
  <p-header>
    Destinatario Externo
  </p-header>

  <app-datos-remitentes  #datosRemitentesExterno  tipoComunicacion="EE" [principal]="hasDestinatarioPrincipal" (destinatarioOutput)="addDestinatario($event); hideAddDestinatarioExternoPopup()"></app-datos-remitentes>

  <p-footer>
    <div class="ui-dialog-buttonpane ui-helper-clearfix">
      <button pButton type="button" class="ui-button-primary"
              label="Cerrar" (click)="hideAddDestinatarioExternoPopup()"></button>
    </div>
  </p-footer>

</p-dialog>

<p-dialog [visible]="destinatarioInternoDialogVisible" modal="modal" [responsive]="true" positionTop="20"
          (onHide)="hideAddDestinatarioInternoPopup()" [width]="800" [style]="{'overflow': 'scroll','max-height': '100%'}">
  <p-header>
    Destinatario Interno
  </p-header>

  <app-datos-remitentes #datosRemitentesInterno tipoComunicacion="EI" [principal]="hasDestinatarioPrincipal" (destinatarioOutput)="addDestinatario($event)"></app-datos-remitentes>

  <p-footer>
    <div class="ui-dialog-buttonpane ui-helper-clearfix">
      <button pButton type="button" class="ui-button-primary"
              label="Cerrar" (click)="hideAddDestinatarioInternoPopup()"></button>
      <!--<button pButton type="button" class="ui-button-primary"-->
              <!--label="Agregar" (click)="addDestinatarioInterno()"></button>-->
    </div>
  </p-footer>

</p-dialog>

<!--<app-datos-remitente  #datosRemitente [editable]="true" [tipoComunicacion]="tipoComunicacionSelected"></app-datos-remitente>-->

<!--<datos-destinatario-externo #datosDestinatarioExterno *ngIf="tipoComunicacionSelected && tipoComunicacionSelected.codigo == 'SE'" [destinatario]="remitenteExterno" [editable]="true" [objTipoComunicacion] = "tipoComunicacionSelected" [responseToRem] = "responseToRem" ></datos-destinatario-externo>-->

<!--<datos-destinatario-interno #destinatarioInterno *ngIf="tipoComunicacionSelected && tipoComunicacionSelected.codigo == 'SI'" [listaDestinatarios]="listaDestinatariosInternos"></datos-destinatario-interno>-->
