<div class="ui-g ui-fluid">

  <app-task-container>
    <div taskBody>
      <div class="ui-g-12">
        <div class="card card-w-title">
          <p-panel header="Resultados búsqueda" [style]="{border: 'none'}">
            <div class="ui-g ui-fluid">
              <div class="ui-g-12">
                <p-dataTable emptyMessage="No se encontraron resultados" selectionMode="multiple"
                             [(selection)]="selectedComunications"
                             [paginator]="true" [rows]="10" [responsive]="true" [value]="comunicaciones">
                  <p-column selectionMode="multiple" [style]="{'width':'50px'}"></p-column>
                  <p-column field="nroRadicado" header="Número radicado" [sortable]="true"></p-column>
                  <p-column header="Tipo de persona" [sortable]="true">
                    <ng-template let-col let-correspondencia="rowData" pTemplate="body">
                      {{correspondencia.tipoPersona?.nombre}}
                    </ng-template>
                  </p-column>
                  <p-column header="Número identificación" [sortable]="true">
                    <ng-template let-col let-correspondencia="rowData" pTemplate="body">
                      {{correspondencia.nroDocuIdentidad || correspondencia.nit}}
                    </ng-template>
                  </p-column>
                  <p-column header="Nombre" [sortable]="true">
                    <ng-template let-col let-correspondencia="rowData" pTemplate="body">
                      {{correspondencia.nombre}}
                    </ng-template>
                  </p-column>
                  <p-column header="Sede" [sortable]="true">
                    <ng-template let-col let-correspondencia="rowData" pTemplate="body">
                      {{findSede(data.codSedeDestino)}}
                    </ng-template>
                  </p-column>
                  <p-column header="Dependencia" [sortable]="true">
                    <ng-template let-col let-correspondencia="rowData" pTemplate="body">
                      {{findDependency(data.codDependenciaDestino)}}
                    </ng-template>
                  </p-column>

                  <p-column field="tipologiaDocumental.nombre" header="Tipología documental"
                            [sortable]="true"></p-column>
                  <p-column field="folios" header="Folios" [sortable]="true"></p-column>
                  <p-column field="anexos" header="Anexos" [sortable]="true"></p-column>
                  <p-column field="estado" header="Estado de entrega" [sortable]="true">
                    <ng-template let-col let-planAgente="rowData" pTemplate="body">
                      {{getEstadoLabel(planAgente[col.field])?.nombre}}
                    </ng-template>
                  </p-column>
                  <p-column field="fecCarguePla" header="Fecha entrega" [sortable]="true">
                    <ng-template let-col let-planAgente="rowData" pTemplate="body">
                      {{planAgente[col.field] | date:'dd/MM/yyyy hh:mm a'}}
                    </ng-template>
                  </p-column>
                  <p-column field="usuario" header="Usuario" [sortable]="true"></p-column>
                  <p-column field="observaciones" header="Observaciones" [sortable]="true"></p-column>
                </p-dataTable>
              </div>
              <div class="ui-g-12" style="padding-top: 20px">
                <button pButton type="button" label="Actualizar planilla"
                        [disabled]="!canUpdatePlanilla()" (click)="actualizarPlanilla()"
                        style="width: auto; margin-bottom: 10px;float:right;margin-left: 12px">
                </button>
                <!--@todo-->
                <button pButton type="button" label="Registrar resultado"
                        [disabled]="selectedComunications.length == 0" (click)="showEditarPlanillaDialog()"
                        style="width: auto; margin-bottom: 10px;float:right;margin-left: 12px">
                </button>
              </div>
            </div>
          </p-panel>
        </div>
      </div>
    </div>
  </app-task-container>
</div>
<p-dialog [visible]="editarPlanillaDialogVisible" modal="modal" [responsive]="true" positionTop="20"
          [contentStyle]="{'overflow':'scroll'}"
          (onHide)="hideEditarPlanillaDialog()" [width]="800">
  <p-header>
    Registrar resultado
  </p-header>
  <app-editar-planilla #popupEditar [planilla]="data" (completado)="editarPlanilla()"></app-editar-planilla>

  <p-footer>
  </p-footer>
</p-dialog>
