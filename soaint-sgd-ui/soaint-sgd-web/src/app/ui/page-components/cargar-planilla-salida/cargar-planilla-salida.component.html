<div class="ui-fluid">
  <app-task-container>
    <div customActions *ngIf="!(closedTask | async)">
        <button pButton type="button" label="Cancelar" style="width: auto; margin-bottom: 10px" *ngIf="!radicacion"
        (click)="abort()"></button>
      <button pButton type="button" label="Registrar resultado"
        [disabled]="selectedComunications.length == 0" (click)="generarPlanilla()"
        style="width: auto; margin-bottom: 10px;float:right;margin-left: 12px">
      </button>
      <button pButton type="button" label="Actualizar planilla"
      [disabled]="selectedComunications.length == 0" (click)="generarPlanilla()"
      style="width: auto; margin-bottom: 10px;float:right;margin-left: 12px">
    </button>
    </div>

    <div taskBody>
        <p-panel header="Búsqueda de tareas" [style]="{border: 'none'}">
          <div class="ui-g ui-fluid" *ngIf="!(closedTask | async)">
              <documento-ecm>Loading...</documento-ecm>
          </div>
        </p-panel>
        <p-panel header="Actualizar planilla" [style]="{border: 'none'}">
          <div class="ui-g ui-fluid" *ngIf="!(closedTask | async)">
            <div class="ui-g-12">
              <p-dataTable emptyMessage="No se encontraron resultados" selectionMode="multiple"
                           [(selection)]="selectedComunications"
                           [paginator]="true" [rows]="10" [responsive]="true" [value]="listadoComunicaciones">
                <p-column selectionMode="multiple" [style]="{'width':'50px'}"></p-column>
                <p-column field="correspondencia.nroRadicado" header="Número radicado" [sortable]="true"></p-column>
                <p-column field="fecRadicado" header="Fecha y hora de radicación" [sortable]="true">
                  <ng-template let-col let-correspondencia="rowData" let-i="rowIndex" pTemplate="body">
                    {{correspondencia[col.field] | date: 'dd/MM/yyyy hh:mm a'}}
                  </ng-template>
                </p-column>
                <p-column header="Tipología documental" [sortable]="true">
                    <ng-template let-col let-correspondencia="rowData" pTemplate="body">
                      {{findTipoDoc((getDatosDocumentos(correspondencia) | async)[0].codTipoDoc)}}
                    </ng-template>
                </p-column>
                <p-column header="Nombre/Razón social" [sortable]="true">
                    <ng-template let-col let-correspondencia="rowData" pTemplate="body">
                      {{(getDatosRemitente(correspondencia) | async).razonSocial || (getDatosRemitente(correspondencia) |
                      async).nombre}}
                    </ng-template>
                </p-column>
                <p-column header="Sede administrativa destino" [sortable]="true">
                    <ng-template let-col let-correspondencia="rowData" pTemplate="body">
                      {{findSede((getDatosDestinatario(correspondencia) | async)[0].codSede)}}
                    </ng-template>
                </p-column>
                <p-column header="Dependencia destino" [sortable]="true">
                    <ng-template let-col let-correspondencia="rowData" pTemplate="body">
                      {{findDependency((getDatosDestinatario(correspondencia) | async)[0].codDependencia)}}
                    </ng-template>
                </p-column>
                <p-column header="País" [sortable]="true">
                </p-column>
                <p-column header="Departamento" [sortable]="true">
                </p-column>
                <p-column header="Ciudad/Municipio" [sortable]="true">
                </p-column>
                <p-column header="Dirección" [sortable]="true">
                </p-column>
                <p-column field="correspondencia.folio" header="Folios" [sortable]="true"
                          [style]="{'width':'110px'}">
                  <ng-template let-col let-correspondencia="rowData" pTemplate="body">
                    {{(getDatosDocumentos(correspondencia) | async)[0].nroFolios}}
                  </ng-template>
                </p-column>
                <p-column field="correspondencia.anexos" header="Anexos" [sortable]="true"
                          [style]="{'width':'110px'}">
                  <ng-template let-col let-correspondencia="rowData" pTemplate="body">
                    {{(getDatosDocumentos(correspondencia) | async)[0].nroAnexos}}
                  </ng-template>
                </p-column>
                <p-column field="fecRadicado" header="Estado de entrega" [sortable]="true"> </p-column>
                <p-column field="fecRadicado" header="Fecha de entrega" [sortable]="true"> </p-column>
                <p-column field="fecRadicado" header="No. guía" [sortable]="true"> </p-column>
                <p-column field="fecRadicado" header="Observaciones" [sortable]="true"> </p-column>
              </p-dataTable>
            </div>
          </div>
        </p-panel>
    </div>
  </app-task-container>
</div>









